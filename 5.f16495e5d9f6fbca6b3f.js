(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Sghe:function(e,t,i){"use strict";i.r(t),i.d(t,"ApplicantModule",function(){return y});var r=i("ofXK"),o=i("3Pt+");class a{static get(e,t){if(t){let t=e.value||{};for(const[i,r]of Object.entries(e.controls))t[i]=r.value;return t}return e.value}}var n=i("fXoL"),c=i("tyNb"),s=i("bk6/"),l=i("4F8/");function b(e,t){if(1&e){const e=n.Ob();n.Nb(0,"button",55),n.Xb("click",function(){return n.nc(e),n.Zb().reviewerAccept()}),n.vc(1," Accept by Reviewer "),n.Mb()}if(2&e){const e=n.Zb();n.xb("disabled",null!=e.particularReq.approvedByReviewer||null)}}function p(e,t){if(1&e){const e=n.Ob();n.Nb(0,"button",56),n.Xb("click",function(){n.nc(e);const t=n.Zb();return t.reviewerToggleRejectBtn=!t.reviewerToggleRejectBtn}),n.vc(1," Rejection By Reviewer "),n.Mb()}if(2&e){const e=n.Zb();n.xb("disabled",null!=e.particularReq.approvedByReviewer||null)}}function d(e,t){if(1&e){const e=n.Ob();n.Nb(0,"button",55),n.Xb("click",function(){return n.nc(e),n.Zb().processorAccept()}),n.vc(1," Accept by Processor "),n.Mb()}if(2&e){const e=n.Zb();n.xb("disabled",null!=e.particularReq.approvedByProcessor||null!=e.particularReq.approvedByReviewer||null)}}function u(e,t){if(1&e){const e=n.Ob();n.Nb(0,"button",56),n.Xb("click",function(){n.nc(e);const t=n.Zb();return t.processorToggleRejectBtn=!t.processorToggleRejectBtn}),n.vc(1," Rejection By Processor "),n.Mb()}if(2&e){const e=n.Zb();n.xb("disabled",null!=e.particularReq.approvedByProcessor||null!=e.particularReq.approvedByReviewer||null)}}function m(e,t){if(1&e){const e=n.Ob();n.Nb(0,"form",10),n.Xb("ngSubmit",function(){return n.nc(e),n.Zb().reviewerReject()}),n.Nb(1,"div",57),n.Nb(2,"label",58),n.vc(3,"Body"),n.Mb(),n.Jb(4,"textarea",59),n.Mb(),n.Nb(5,"button",60),n.vc(6,"Reject"),n.Mb(),n.Mb()}if(2&e){const e=n.Zb();n.fc("formGroup",e.reviewerRejectionForm),n.wb(5),n.fc("disabled",e.reviewerRejectionForm.invalid)}}function f(e,t){if(1&e){const e=n.Ob();n.Nb(0,"form",10),n.Xb("ngSubmit",function(){return n.nc(e),n.Zb().processorReject()}),n.Nb(1,"div",57),n.Nb(2,"label",58),n.vc(3,"Body"),n.Mb(),n.Jb(4,"textarea",59),n.Mb(),n.Nb(5,"button",60),n.vc(6,"Reject"),n.Mb(),n.Mb()}if(2&e){const e=n.Zb();n.fc("formGroup",e.processorRejectionForm),n.wb(5),n.fc("disabled",e.processorRejectionForm.invalid)}}let v=(()=>{class e{constructor(e,t,i,r,o){this.formBuilder=e,this.router=t,this.route=i,this.credentialService=r,this.toastService=o,this.registrationRequests=[],this.requestId=0,this.processor=!1,this.reviewer=!1,this.reviewerToggleRejectBtn=!1,this.processorToggleRejectBtn=!1,this.requestId=this.route.snapshot.paramMap.get("id")||0,this.initializeForm(),this.initializeReviewerRejectForm(),this.initializeProcessorRejectForm()}ngOnInit(){var e;this.requestId>0&&(this.setFormData(this.requestId),this.profile=this.credentialService.credentials,(null===(e=this.profile.roles)||void 0===e?void 0:e.indexOf("role_application_reviewer"))>-1?(this.reviewer=!0,this.processor=!1):this.profile.roles.indexOf("role_application_processor")>-1&&(this.reviewer=!1,this.processor=!0))}setFormData(e){let t=this.getRegistrationRequests.filter(t=>t.id==e);this.particularReq=t[0],this.applicantDetailsForm.patchValue(this.particularReq)}initializeForm(){return this.applicantDetailsForm=this.formBuilder.group({id:[""],importImg:[""],firstName:[""],lastName:[""],dateOfBirth:["",o.o.required],gender:[""],stateOfOrigin:[""],occupation:[""],residence:[""],email:["",o.o.required],applicationType:[""],occurence:[""],applicationOrigin:[""]})}initializeReviewerRejectForm(){return this.reviewerRejectionForm=this.formBuilder.group({body:["",o.o.required]})}initializeProcessorRejectForm(){return this.processorRejectionForm=this.formBuilder.group({body:["",o.o.required]})}get applicantDetailsFormControl(){return this.applicantDetailsForm.controls}onImgSelect(e){if(e.target.files.length>0){const t=e.target.files[0];if(!t.name.endsWith(".PNG"))return void alert("Only PNG, JPG and JPEG files accepted!");if(t.size/1024/1024>5)return void alert("Size of Image cant exceed 5mb");this.imgInputLabel=t.name,this.getBase64(t)}}getBase64(e){let t=new FileReader;t.readAsDataURL(e),t.onload=function(){localStorage.setItem("base64",JSON.stringify({base64:t.result}))},t.onerror=function(e){console.log("Error: ",e)}}get getBase64FromLocalStorage(){let e=localStorage.getItem("base64");return JSON.parse(null==e?"{}":e)}get getRegistrationRequests(){let e=localStorage.getItem("registrationRequests");return JSON.parse(null==e?"{}":e)}saveApplicantDetails(){if(this.applicantDetailsFormControl.importImg.setValue(this.getBase64FromLocalStorage.base64),this.applicantDetailsForm.valid){"registrationRequests"in localStorage&&(this.registrationRequests=this.getRegistrationRequests),this.applicantDetailsFormControl.id.setValue(this.registrationRequests.length+1);let e=a.get(this.applicantDetailsForm,!0);this.registrationRequests.push({id:e.id,approvedByReviewer:null,approvedByProcessor:null,reviewerRejectionReason:null,processorRejectionReason:null,applicationOrigin:e.applicationOrigin,applicationType:e.applicationType,dateOfBirth:e.dateOfBirth,email:e.email,firstName:e.firstName,gender:e.gender,importImg:e.importImg,lastName:e.lastName,occupation:e.occupation,occurence:e.occurence,residence:e.residence,stateOfOrigin:e.stateOfOrigin}),localStorage.setItem("registrationRequests",JSON.stringify(this.registrationRequests)),this.router.navigateByUrl("/login")}}reviewerAccept(){if(1==confirm("Are You sure?")){let e=a.get(this.applicantDetailsForm,!0);this.updateData(this.particularReq,{id:e.id,approvedByReviewer:!0,approvedByProcessor:null,reviewerRejectionReason:this.particularReq.reviewerRejectionReason,processorRejectionReason:null,applicationOrigin:e.applicationOrigin,applicationType:e.applicationType,dateOfBirth:e.dateOfBirth,email:e.email,firstName:e.firstName,gender:e.gender,importImg:e.importImg,lastName:e.lastName,occupation:e.occupation,occurence:e.occurence,residence:e.residence,stateOfOrigin:e.stateOfOrigin}),this.toastService.showSuccess("Updated Sucessfully!"),this.router.navigateByUrl("/application-reviewer/dashboard")}}reviewerReject(){if(1==confirm("Are You sure?")){let e=a.get(this.applicantDetailsForm,!0),t=a.get(this.reviewerRejectionForm,!0);this.updateData(this.particularReq,{id:e.id,approvedByReviewer:!1,approvedByProcessor:null,reviewerRejectionReason:t.body,processorRejectionReason:null,applicationOrigin:e.applicationOrigin,applicationType:e.applicationType,dateOfBirth:e.dateOfBirth,email:e.email,firstName:e.firstName,gender:e.gender,importImg:e.importImg,lastName:e.lastName,occupation:e.occupation,occurence:e.occurence,residence:e.residence,stateOfOrigin:e.stateOfOrigin}),Email.send({Host:"smtp.elasticemail.com",Username:"okipeterovie@gmail.com",Password:"44DACDE7E312D9A99C219603DC4928E9383D",To:e.email,From:"okipeterovie@gmail.com",Subject:"Rejection",Body:`\n        <i>\n        Your email was rejected because\n        </i> <br/> \n        <b>Name: </b>${t.body} <br /> `}).then(e=>{console.log(e)}),this.toastService.showSuccess("Updated Sucessfully!"),this.router.navigateByUrl("/application-reviewer/dashboard")}}processorAccept(){if(1==confirm("Are You sure?")){let e=a.get(this.applicantDetailsForm,!0);this.updateData(this.particularReq,{id:e.id,approvedByReviewer:this.particularReq.approvedByReviewer,approvedByProcessor:!0,reviewerRejectionReason:this.particularReq.reviewerRejectionReason,processorRejectionReason:null,applicationOrigin:e.applicationOrigin,applicationType:e.applicationType,dateOfBirth:e.dateOfBirth,email:e.email,firstName:e.firstName,gender:e.gender,importImg:e.importImg,lastName:e.lastName,occupation:e.occupation,occurence:e.occurence,residence:e.residence,stateOfOrigin:e.stateOfOrigin}),this.toastService.showSuccess("Updated Sucessfully!"),this.router.navigateByUrl("/application-processor/dashboard")}}processorReject(){if(1==confirm("Are You sure?")){let e=a.get(this.applicantDetailsForm,!0),t=a.get(this.processorRejectionForm,!0);this.updateData(this.particularReq,{id:e.id,approvedByReviewer:this.particularReq.approvedByReviewer,approvedByProcessor:!1,reviewerRejectionReason:this.particularReq.reviewerRejectionReason,processorRejectionReason:t.body,applicationOrigin:e.applicationOrigin,applicationType:e.applicationType,dateOfBirth:e.dateOfBirth,email:e.email,firstName:e.firstName,gender:e.gender,importImg:e.importImg,lastName:e.lastName,occupation:e.occupation,occurence:e.occurence,residence:e.residence,stateOfOrigin:e.stateOfOrigin}),Email.send({Host:"smtp.elasticemail.com",Username:"okipeterovie@gmail.com",Password:"44DACDE7E312D9A99C219603DC4928E9383D",To:e.email,From:"okipeterovie@gmail.com",Subject:"Rejection",Body:`\n        <i>\n        Your email was rejected because\n        </i> <br/> \n        <b>Name: </b>${t.body} <br /> `}).then(e=>{console.log(e)}),this.toastService.showSuccess("Updated Sucessfully!"),this.router.navigateByUrl("/application-processor/dashboard")}}updateData(e,t){let i=this.getRegistrationRequests;for(let r=0;r<i.length;r++)i[r].id==e.id&&(i[r]=t);localStorage.setItem("registrationRequests",JSON.stringify(i))}goBack(){window.history.back()}}return e.\u0275fac=function(t){return new(t||e)(n.Ib(o.d),n.Ib(c.b),n.Ib(c.a),n.Ib(s.a),n.Ib(l.a))},e.\u0275cmp=n.Cb({type:e,selectors:[["app-applicant-registration"]],decls:125,vars:23,consts:[[1,"main-content"],[1,"content-wrapper"],[1,"container"],[1,"col-md-12","card"],[1,"row"],[1,"col-md-4"],[1,"col-md-6"],[1,"col-md-2"],[1,"btn","btn-success","box-shadow-2","border-0","pull-right","mr-5",3,"click"],[1,"fa","fa-arrow-left"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"custom-img"],["type","file","id","customFile","name","importImg","accept","image/*",1,"custom-file-input",3,"change"],["UploadImageInput",""],["for","customFile",1,"custom-file-label"],["type","text","formControlName","id",1,"form-control"],[1,"form-row"],["for","firstName"],["type","text","placeholder","First name","aria-label","First name","formControlName","firstName",1,"form-control"],["for","lastName"],["type","text","placeholder","Last name","aria-label","Last name","formControlName","lastName",1,"form-control"],["for","dateOfBirth"],["type","date","placeholder","Date of Birth","aria-label","Date of Birth","formControlName","dateOfBirth",1,"form-control"],["for","gender"],["id","inputGender","formControlName","gender",1,"form-control"],["selected","","disabled",""],["value","female"],["value","male"],["for","stateOfOrigin"],["type","text","placeholder","State of Origin","aria-label","State of Origin","formControlName","stateOfOrigin",1,"form-control"],["for","occupation"],["type","text","placeholder","Occupation","aria-label","Occupation","formControlName","occupation",1,"form-control"],["for","residence"],["type","text","placeholder","Residence","aria-label","Residence","formControlName","residence",1,"form-control"],["for","email"],["type","email","placeholder","Email","aria-label","Email","formControlName","email",1,"form-control"],["for","Application Type"],["id","applicationType","formControlName","applicationType",1,"form-control"],["value","Articulated Vehicle"],["value","Commercial"],["value","Private"],["value","Motorcycle"],["for","first/renewal"],["id","applicationType","formControlName","occurence",1,"form-control"],["value","First Time"],["value","Renewal"],[1,"applicationOrigin"],["type","text","placeholder","Application Origin","aria-label","Application Origin","formControlName","applicationOrigin",1,"form-control"],[1,"col-md-3"],[1,"card-body"],["type","submit",1,"btn","btn-primary",3,"disabled","hidden"],["class","btn btn-success","type","button",3,"click",4,"ngIf"],["class","btn btn-danger","type","button",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","body"],["id","body","formControlName","body","rows","3",1,"form-control"],["type","submit",1,"btn","btn-danger",3,"disabled"]],template:function(e,t){1&e&&(n.Nb(0,"div",0),n.Nb(1,"div",1),n.Nb(2,"div",2),n.Nb(3,"div",3),n.Jb(4,"br"),n.Nb(5,"div",4),n.Nb(6,"div",5),n.Nb(7,"h4"),n.vc(8," Registration Form "),n.Mb(),n.Mb(),n.Jb(9,"div",6),n.Nb(10,"div",7),n.Nb(11,"button",8),n.Xb("click",function(){return t.goBack()}),n.Jb(12,"i",9),n.vc(13,"\xa0Go Back "),n.Mb(),n.Mb(),n.Mb(),n.Jb(14,"br"),n.Nb(15,"div",4),n.Nb(16,"div",5),n.Nb(17,"h4"),n.vc(18," Applicant Details "),n.Mb(),n.Mb(),n.Mb(),n.Nb(19,"form",10),n.Xb("ngSubmit",function(){return t.saveApplicantDetails()}),n.Nb(20,"div",11),n.Nb(21,"div",12),n.Nb(22,"input",13,14),n.Xb("change",function(e){return t.onImgSelect(e)}),n.Mb(),n.Nb(24,"label",15),n.vc(25),n.Mb(),n.Mb(),n.Mb(),n.Jb(26,"br"),n.Jb(27,"input",16),n.Nb(28,"div",17),n.Nb(29,"div",6),n.Nb(30,"label",18),n.vc(31,"First Name"),n.Mb(),n.Jb(32,"input",19),n.Mb(),n.Nb(33,"div",6),n.Nb(34,"label",20),n.vc(35,"Last Name"),n.Mb(),n.Jb(36,"input",21),n.Mb(),n.Mb(),n.Jb(37,"br"),n.Nb(38,"div",17),n.Nb(39,"div",6),n.Nb(40,"label",22),n.vc(41,"Date of Birth"),n.Mb(),n.Jb(42,"input",23),n.Mb(),n.Nb(43,"div",6),n.Nb(44,"label",24),n.vc(45,"Gender"),n.Mb(),n.Nb(46,"select",25),n.Nb(47,"option",26),n.vc(48,"..."),n.Mb(),n.Nb(49,"option",27),n.vc(50,"Female"),n.Mb(),n.Nb(51,"option",28),n.vc(52,"Male"),n.Mb(),n.Mb(),n.Mb(),n.Mb(),n.Jb(53,"br"),n.Nb(54,"div",17),n.Nb(55,"div",6),n.Nb(56,"label",29),n.vc(57,"State Of Origin"),n.Mb(),n.Jb(58,"input",30),n.Mb(),n.Nb(59,"div",6),n.Nb(60,"label",31),n.vc(61,"Occupation"),n.Mb(),n.Jb(62,"input",32),n.Mb(),n.Mb(),n.Jb(63,"br"),n.Nb(64,"div",17),n.Nb(65,"div",6),n.Nb(66,"label",33),n.vc(67,"Residence"),n.Mb(),n.Jb(68,"input",34),n.Mb(),n.Nb(69,"div",6),n.Nb(70,"label",35),n.vc(71,"Email"),n.Mb(),n.Jb(72,"input",36),n.Mb(),n.Mb(),n.Jb(73,"br"),n.Nb(74,"div",4),n.Nb(75,"div",5),n.Nb(76,"h4"),n.vc(77," Vehicle Details "),n.Mb(),n.Mb(),n.Mb(),n.Nb(78,"div",17),n.Nb(79,"div",6),n.Nb(80,"label",37),n.vc(81,"Application Type"),n.Mb(),n.Nb(82,"select",38),n.Nb(83,"option",26),n.vc(84,"..."),n.Mb(),n.Nb(85,"option",39),n.vc(86,"Articulated Vehicle"),n.Mb(),n.Nb(87,"option",40),n.vc(88,"Commercial"),n.Mb(),n.Nb(89,"option",41),n.vc(90,"Private"),n.Mb(),n.Nb(91,"option",42),n.vc(92,"Motorcycle"),n.Mb(),n.Mb(),n.Mb(),n.Nb(93,"div",6),n.Nb(94,"label",43),n.vc(95,"First Time or Renewal?"),n.Mb(),n.Nb(96,"select",44),n.Nb(97,"option",26),n.vc(98,"..."),n.Mb(),n.Nb(99,"option",45),n.vc(100,"First Time"),n.Mb(),n.Nb(101,"option",46),n.vc(102,"Renewal"),n.Mb(),n.Mb(),n.Mb(),n.Mb(),n.Jb(103,"br"),n.Nb(104,"div",4),n.Nb(105,"div",11),n.Nb(106,"div",47),n.Nb(107,"label",33),n.vc(108,"Residence"),n.Mb(),n.Jb(109,"input",48),n.Mb(),n.Mb(),n.Mb(),n.Nb(110,"div",4),n.Nb(111,"div",49),n.Nb(112,"div",50),n.Nb(113,"button",51),n.vc(114,"Upload"),n.Mb(),n.Mb(),n.Mb(),n.Mb(),n.Mb(),n.tc(115,b,2,1,"button",52),n.Jb(116,"br"),n.Jb(117,"br"),n.tc(118,p,2,1,"button",53),n.tc(119,d,2,1,"button",52),n.Jb(120,"br"),n.Jb(121,"br"),n.tc(122,u,2,1,"button",53),n.tc(123,m,7,2,"form",54),n.tc(124,f,7,2,"form",54),n.Mb(),n.Mb(),n.Mb(),n.Mb()),2&e&&(n.wb(19),n.fc("formGroup",t.applicantDetailsForm),n.wb(3),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(3),n.wc(t.imgInputLabel||"Choose File"),n.wb(2),n.xb("disabled",!0),n.wb(5),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(4),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(6),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(4),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(12),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(4),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(6),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(4),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(10),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(14),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(13),n.xb("disabled",!(!t.reviewer&&!t.processor)||null),n.wb(4),n.fc("disabled",t.applicantDetailsForm.invalid)("hidden",t.reviewer||t.processor),n.wb(2),n.fc("ngIf",t.reviewer),n.wb(3),n.fc("ngIf",t.reviewer),n.wb(1),n.fc("ngIf",t.processor),n.wb(3),n.fc("ngIf",t.processor),n.wb(1),n.fc("ngIf",t.reviewerToggleRejectBtn),n.wb(1),n.fc("ngIf",t.processorToggleRejectBtn))},directives:[o.q,o.k,o.f,o.b,o.j,o.e,o.n,o.l,o.p,r.k],styles:[""]}),e})();var g=i("1kSV"),h=i("whXc");const N=[{path:"",pathMatch:"full",redirectTo:"register-vehicle"},{path:"register-vehicle",component:v,data:{title:"Applicant Registration",privileges:["application_processor_privilege"]}},{path:"view/:id",canActivate:[i("qfIS").a],component:v,data:{title:"Applicant Registration",privileges:["application_processor_privilege","application_reviewer_privilege"]}}];let R=(()=>{class e{}return e.\u0275mod=n.Gb({type:e}),e.\u0275inj=n.Fb({factory:function(t){return new(t||e)},imports:[[c.d.forChild(N)],c.d]}),e})();const w=[v];let y=(()=>{class e{}return e.\u0275mod=n.Gb({type:e}),e.\u0275inj=n.Fb({factory:function(t){return new(t||e)},providers:w,imports:[[r.b,R,c.d,o.g,o.m,h.a,g.c]]}),e})()}}]);